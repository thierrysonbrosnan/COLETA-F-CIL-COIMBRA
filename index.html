<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Coleta F√°cil</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f9f9f9;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    .exame {
      background: white;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    button {
      margin: 5px 5px 0 0;
      padding: 6px 10px;
      border: none;
      border-radius: 4px;
      background-color: #3498db;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #2980b9;
    }
    footer {
      text-align: center;
      margin-top: 30px;
      font-size: 14px;
    }
    .whatsapp-button {
      display: inline-block;
      margin-top: 8px;
      background-color: #25d366;
      color: white;
      padding: 8px 16px;
      border-radius: 5px;
      text-decoration: none;
    }
    #adminLogin {
      text-align: center;
      margin-bottom: 20px;
    }
    #searchInput {
      display: block;
      width: 100%;
      max-width: 500px;
      margin: 0 auto 20px auto;
      padding: 10px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    #novoExameForm {
      max-width: 500px;
      margin: 0 auto 20px auto;
      padding: 10px;
      background: #ffffff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    #novoExameForm input, #novoExameForm textarea {
      width: 100%;
      margin-bottom: 10px;
      padding: 8px;
      font-size: 14px;
      border-radius: 4px;
      border: 1px solid #ccc;
      resize: vertical;
    }
    @media (max-width: 600px) {
      .exame {
        font-size: 14px;
      }
      button {
        padding: 5px 8px;
        font-size: 14px;
      }
      #searchInput {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <h1>Coleta f√°cil</h1>

  <div id="adminLogin">
    <input type="password" id="adminPassword" placeholder="Digite a senha de admin" />
    <button onclick="ativarAdmin()">Entrar como Admin</button>
  </div>

  <input type="text" id="searchInput" placeholder="üîç Buscar exame..." oninput="filtrarExames()" />

  <div id="novoExameContainer"></div>

  <!-- NOVO: Bot√£o de sair do modo administrador -->
  <div id="adminControls" style="text-align:center; display:none;">
    <button onclick="sairDoModoAdmin()">Sair do modo administrador</button>
  </div>

  <div id="coletaf√°cil"></div>
  <div id="listaExames"></div> <!-- GARANTIA que o container de exames exista -->

  <footer>
    <a href="https://wa.me/5511992386161?text=Ol√°!%20Gostaria%20de%20enviar%20um%20feedback%20sobre%20a%20Lista%20de%20Exames."
       target="_blank"
       class="whatsapp-button">
      üì± Enviar Feedback pelo WhatsApp
    </a>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      renderizarExames();
    });

    const senhaAdmin = "1009";
    let isAdmin = false;

    const exames = [/* ... sua lista de exames aqui permanece igual ... */];

    function ativarAdmin() {
      const senha = document.getElementById("adminPassword").value;
      if (senha === senhaAdmin) {
        isAdmin = true;
        alert("Modo administrador ativado!");
        document.getElementById("adminLogin").style.display = "none";
        document.getElementById("adminControls").style.display = "block"; // NOVO
        mostrarFormularioNovoExame();
        renderizarExames();
      } else {
        alert("Senha incorreta.");
      }
    }

    // NOVO: Fun√ß√£o para sair do modo administrador
    function sairDoModoAdmin() {
      isAdmin = false;
      document.getElementById("adminControls").style.display = "none";
      document.getElementById("adminLogin").style.display = "block";
      document.getElementById("novoExameContainer").innerHTML = "";
      renderizarExames();
    }

    function renderizarExames(filtro = "") {
      const container = document.getElementById("listaExames");
      container.innerHTML = "";

      exames.forEach((exame, index) => {
        if (filtro && !exame.nome.toLowerCase().includes(filtro.toLowerCase())) return;

        const div = document.createElement("div");
        div.className = "exame";
        div.innerHTML = `
          <h3>${exame.nome}</h3>
          <p><strong>Preparo:</strong> ${exame.preparo}</p>
          <p><strong>Hor√°rio:</strong> ${exame.horario}</p>
          <p><strong>Explica√ß√£o:</strong> ${exame.explicacao}</p>
          <p><strong>Endere√ßo:</strong> ${exame.endereco}</p>
        `;

        const btnImprimir = document.createElement("button");
        btnImprimir.textContent = "Imprimir informa√ß√µes";
        btnImprimir.onclick = () => imprimirExame(exame);
        div.appendChild(btnImprimir);

        if (isAdmin) {
          const btnEditar = document.createElement("button");
          btnEditar.textContent = "Editar";
          btnEditar.onclick = () => editarExame(index);
          div.appendChild(btnEditar);
        }

        container.appendChild(div);
      });
    }

    function imprimirExame(exame) {
      const conteudo = `
        <html>
          <head>
            <title>Informa√ß√µes do Exame</title>
            <style>
              body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
              h2 { color: #2c3e50; }
              p { margin: 8px 0; }
            </style>
          </head>
          <body>
            <h2>${exame.nome}</h2>
            <p><strong>Preparo:</strong> ${exame.preparo}</p>
            <p><strong>Hor√°rio:</strong> ${exame.horario}</p>
            <p><strong>Explica√ß√£o:</strong> ${exame.explicacao}</p>
            <p><strong>Endere√ßo:</strong> ${exame.endereco}</p>
          </body>
        </html>
      `;
      const janela = window.open("", "_blank");
      janela.document.write(conteudo);
      janela.document.close();
      janela.focus();
      janela.print();
    }

    function editarExame(index) {
      const novoNome = prompt("Novo nome do exame:", exames[index].nome);
      const novoPreparo = prompt("Novo preparo:", exames[index].preparo);
      const novoHorario = prompt("Novo hor√°rio:", exames[index].horario);
      const novaExplicacao = prompt("Nova explica√ß√£o:", exames[index].explicacao);
      const novoEndereco = prompt("Novo endere√ßo:", exames[index].endereco);

      if (novoNome && novoPreparo && novoHorario && novaExplicacao && novoEndereco) {
        exames[index] = {
          nome: novoNome,
          preparo: novoPreparo,
          horario: novoHorario,
          explicacao: novaExplicacao,
          endereco: novoEndereco
        };
        renderizarExames(document.getElementById("searchInput").value);
      }
    }

    function mostrarFormularioNovoExame() {
      const container = document.getElementById("novoExameContainer");
      container.innerHTML = `
        <div id="novoExameForm">
          <h3>Adicionar Novo Exame</h3>
          <input type="text" id="novoNome" placeholder="Nome do exame" />
          <textarea id="novoPreparo" placeholder="Preparo necess√°rio"></textarea>
          <input type="text" id="novoHorario" placeholder="Hor√°rio" />
          <textarea id="novaExplicacao" placeholder="Explica√ß√£o"></textarea>
          <input type="text" id="novoEndereco" placeholder="Endere√ßo" />
          <button onclick="adicionarNovoExame()">Adicionar</button>
        </div>
      `;
    }

    function adicionarNovoExame() {
      const nome = document.getElementById("novoNome").value;
      const preparo = document.getElementById("novoPreparo").value;
      const horario = document.getElementById("novoHorario").value;
      const explicacao = document.getElementById("novaExplicacao").value;
      const endereco = document.getElementById("novoEndereco").value;

      if (nome && preparo && horario && explicacao && endereco) {
        exames.push({ nome, preparo, horario, explicacao, endereco });
        renderizarExames();
        mostrarFormularioNovoExame();
      } else {
        alert("Por favor, preencha todos os campos.");
      }
    }

    function filtrarExames() {
      const termo = document.getElementById("searchInput").value;
      renderizarExames(termo);
    }
  </script>
</body>
</html>

